<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>REAFILIACIÓN Y REACTIVACIÓN | Guía operativa</title>

  <!-- Google Font Sora -->
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --violeta-oscuro: #3D57C7;
      --verde-claro: #ABC94A;
      --verde-claro-tenue: rgba(171, 201, 74, 0.18);
      --lila-claro: #C2ADFF;
      --verde-oscuro: #005E5C;
      --texto: #1f2937;
      --gris: #6b7280;
      --fondo: #f8fafc;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Sora', sans-serif;
      background: var(--fondo);
      color: var(--texto);
      font-size: 15px;
      line-height: 1.5;
    }

    main {
      max-width: 900px;
      margin: auto;
      padding: 16px;
    }

    h1 {
      font-size: 1.5rem;
      color: var(--violeta-oscuro);
      margin-bottom: 8px;
    }

    h2 {
      font-size: 1.15rem;
      color: var(--verde-oscuro);
      margin-top: 28px;
    }

    h3 {
      font-size: 1rem;
      margin-top: 20px;
    }

    p {
      margin: 6px 0 12px;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .checklist label {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      margin-bottom: 10px;
      cursor: pointer;
    }

    .checklist input {
      margin-top: 3px;
    }

    .btn {
      margin-top: 16px;
      background: var(--violeta-oscuro);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      font-family: 'Sora', sans-serif;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .resultado {
      display: none;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
      background: var(--verde-claro-tenue);
      border-left: 6px solid var(--verde-claro);
    }

    .resultado strong {
      display: block;
      font-size: 1.05rem;
      margin-bottom: 6px;
    }

    .alerta {
      background: #fff7ed;
      border-left: 5px solid #f59e0b;
      padding: 12px;
      border-radius: 8px;
      margin: 12px 0;
      font-size: 0.9rem;
    }

    ul {
      padding-left: 18px;
    }

    li {
      margin-bottom: 6px;
    }

    @media (max-width: 600px) {
      body {
        font-size: 14px;
      }

      h1 {
        font-size: 1.35rem;
      }
    }
  </style>
</head>
<body>

<main>

  <h1>Guía operativa | Reafiliación y reactivación</h1>
  <p>Script paso a paso para Atención al Afiliado</p>

  <!-- PASO 1 -->
 <section class="card">
  <h2>Identificación del trámite</h2>
  <p>Ingresá los datos para determinar el tipo de gestión:</p>

  <div class="checklist">
    <label>
      Fecha de baja del afiliado:
      <input type="date" id="fechaBaja" style="margin-top:6px;">
    </label>

    <label>
      Edad del titular:
      <input type="number" id="edad" min="0" style="margin-top:6px; width:100px;">
    </label>

    <div class="form-group">
  <label class="section-title">¿Existe ficha cargada en Módulo Comercial?</label>

  <div class="radio-group">
    <label>
      <input type="radio" name="existeFicha" value="si" />
      Sí
    </label>

    <label>
      <input type="radio" name="existeFicha" value="no" />
      No
    </label>
  </div>

  <small class="helper-text">
    Si no se puede verificar, seleccionar la opción que corresponda según la información disponible.
  </small>
      
  </div>
  </div>

  <button class="btn" onclick="determinarTramite()">Identificar trámite</button>
</section>

  <!-- RESULTADO -->
  <section id="resultado" class="resultado"></section>

  <!-- REAFILIACIÓN -->
  <section id="reafiliacion" class="card" style="display:none;">
    <h2>Proceso · Reafiliación</h2>

    <div class="alerta">
      ⚠️ Gestión <strong>comercial</strong>.  
      <br>No generar ticket administrativo.
    </div>

    <h3>Control de Admisión</h3>
    <ul>
      <li>Datos personales completos</li>
      <li>Integrantes declarados (beneficiario / negativa)</li>
      <li>CODEM: verificar si existen integrantes no declarados</li>
      <li>Estado afiliado (nuevo / activo / baja)</li>
      <li>Verificar y regularizar deuda</li>
      <li>Opción SSS y aportes</li>
      <li>Tipo de afiliado (traspaso / prepago)</li>
      <li>Datos del empleador: CUIT, fecha de ingreso  
        <br><em>Si no existe, cargar en MP &gt; Archivos &gt; Empleadores</em>
      </li>
      <li>Cuota, aporte, descuentos y forma de pago</li>
    </ul>

    <h3>Motivos de ficha “Requerida”</h3>
    <ul>
      <li>Integrante en CODEM no declarado</li>
      <li>Falta documentación</li>
      <li>Falta recibo de sueldo</li>
      <li>Costos incorrectos</li>
      <li>Datos de débito incorrectos</li>
      <li>Descuentos mal aplicados</li>
    </ul>
  </section>

  <!-- REACTIVACIÓN -->
  <section id="reactivacion" class="card" style="display:none;">
    <h2>Proceso · Reactivación</h2>

    <div class="alerta">
      ⚠️ Gestión <strong>administrativa</strong>.  
      <br>No cargar ficha en Módulo Comercial.
    </div>

    <h3>Pasos del trámite</h3>
    <ul>
      <li>Generar ticket administrativo</li>
      <li>Controlar motivo de baja</li>
      <li>Verificar y regularizar deuda</li>
      <li>Solicitar documentación correspondiente</li>
      <li>Gestionar reactivación en sistema</li>
      <li>Confirmar activación con el afiliado</li>
    </ul>
  </section>

</main>

<script>
  function mesesEntreFechas(fechaInicio, fechaFin) {
    const inicio = new Date(fechaInicio);
    const fin = new Date(fechaFin);

    let meses = (fin.getFullYear() - inicio.getFullYear()) * 12;
    meses += fin.getMonth() - inicio.getMonth();

    return meses;
  }

  function determinarTramite() {
    const fichaSeleccionada = document.querySelector('input[name="existeFicha"]:checked');
    const ficha = fichaSeleccionada ? fichaSeleccionada.value === 'si' : null;

    const fechaBaja = document.getElementById('fechaBaja').value;
    const edad = parseInt(document.getElementById('edad').value);

    const resultado = document.getElementById('resultado');
    const reafiliacion = document.getElementById('reafiliacion');
    const reactivacion = document.getElementById('reactivacion');

    reafiliacion.style.display = 'none';
    reactivacion.style.display = 'none';
    resultado.style.display = 'block';

    // VALIDACIÓN 1: ficha
    if (ficha === null) {
      resultado.innerHTML = `
        <strong>Falta información</strong><br>
        Indicá si existe o no ficha cargada en Módulo Comercial.
      `;
      return;
    }

    // VALIDACIÓN 2: datos básicos
    if (!fechaBaja || isNaN(edad)) {
      resultado.innerHTML = `
        <strong>Faltan datos</strong><br>
        Ingresá la fecha de baja y la edad del titular para continuar.
      `;
      return;
    }

    const hoy = new Date().toISOString().split('T')[0];
    const mesesBaja = mesesEntreFechas(fechaBaja, hoy);

    const correspondeReactivacion = edad >= 50 || mesesBaja <= 6;

    if (correspondeReactivacion) {
      resultado.innerHTML = `
        <strong>Trámite identificado: REACTIVACIÓN</strong><br>
        Gestión administrativa mediante ticket.<br>
        <em>No corresponde carga de ficha comercial.</em>
      `;
      reactivacion.style.display = 'block';
    } else {
      resultado.innerHTML = `
        <strong>Trámite identificado: REAFILIACIÓN</strong><br>
        Gestión comercial.<br>
        ${
          ficha
            ? 'La ficha puede continuar su curso en Módulo Comercial.'
            : '<em>Corresponde reafiliación. Se debe solicitar la carga de ficha en Módulo Comercial.</em>'
        }
      `;
      reafiliacion.style.display = 'block';
    }
  }
</script>

</body>
</html>
